schema: '2.0'
stages:
  download:
    cmd: python src/download.py
    deps:
    - path: params.yaml
      hash: md5
      md5: 32881420f32e5a0263fea812a3633596
      size: 2045
      isexec: true
    - path: src/download.py
      hash: md5
      md5: 850fce93e3aac51f7044064c4d9c4cc4
      size: 1883
      isexec: true
    params:
      params.yaml:
        download:
          kaggle_dataset: manidevesh/hr-dataset-analysis
          kaggle_file: HR_DataSet.csv
          download_folder: data
          download_file: raw_data.csv
    outs:
    - path: data/raw_data.csv
      hash: md5
      md5: 59d378061790edde7de565c9d02dffc7
      size: 566785
      isexec: true
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/raw_data.csv
      hash: md5
      md5: 59d378061790edde7de565c9d02dffc7
      size: 566785
      isexec: true
    - path: params.yaml
      hash: md5
      md5: 32881420f32e5a0263fea812a3633596
      size: 2045
      isexec: true
    - path: src/preprocess.py
      hash: md5
      md5: 0dad1a7e1dc8104310051c68c538f4ed
      size: 3649
      isexec: true
    params:
      params.yaml:
        preprocess:
          input_folder: data
          input_file: raw_data.csv
          output_file_path: data/preprocessed_data.csv
          rename_map:
            time_spend_company: time_spend_in_company
            Work_accident: had_work_accidents
            left: left_or_not
            promotion_last_5years: promoted_last_5_years
            Department: department
          keep_duplicates: true
    outs:
    - path: data/preprocessed_data.csv
      hash: md5
      md5: 6f27b1770ba03d23c0f84f68a674adfb
      size: 1496887
      isexec: true
  train:
    cmd: python src/train.py
    deps:
    - path: data/preprocessed_data.csv
      hash: md5
      md5: 6f27b1770ba03d23c0f84f68a674adfb
      size: 1496887
      isexec: true
    - path: params.yaml
      hash: md5
      md5: 32881420f32e5a0263fea812a3633596
      size: 2045
      isexec: true
    - path: src/train.py
      hash: md5
      md5: 28ef4159d42fef168723de8e21aef63e
      size: 5238
      isexec: true
    params:
      params.yaml:
        train:
          file_path: data/preprocessed_data.csv
          prediction_column: left_or_not
          test_X_file_path: data/test_X.csv
          test_y_file_path: data/test_y.csv
          random_state: 42
          cross_validations: 3
          max_depth:
          - 2
          - 3
          - 3
          min_samples_split:
          - 8
          - 9
          - 1
          n_estimators:
          - 40
          - 41
          - 10
          learning_rate:
          - 0.8
          - 1.1
          - 0.2
          model_file_path: models/model.pkl
    outs:
    - path: data/test_X.csv
      hash: md5
      md5: fbb5a375c4815ec924c4f1ea87f67008
      size: 293702
      isexec: true
    - path: data/test_y.csv
      hash: md5
      md5: f17ddd6ddc87de718208a781d376e1ca
      size: 6012
      isexec: true
    - path: models/model.pkl
      hash: md5
      md5: 0ee087707f64cde28f3fda56290400f6
      size: 32667
      isexec: true
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/test_X.csv
      hash: md5
      md5: fbb5a375c4815ec924c4f1ea87f67008
      size: 293702
      isexec: true
    - path: data/test_y.csv
      hash: md5
      md5: f17ddd6ddc87de718208a781d376e1ca
      size: 6012
      isexec: true
    - path: models/model.pkl
      hash: md5
      md5: 0ee087707f64cde28f3fda56290400f6
      size: 32667
      isexec: true
    - path: params.yaml
      hash: md5
      md5: 32881420f32e5a0263fea812a3633596
      size: 2045
      isexec: true
    - path: src/evaluate.py
      hash: md5
      md5: b2b0e6857e5d31f5e240a7c735432e9a
      size: 2213
      isexec: true
    params:
      params.yaml:
        evaluate:
          model_file_path: models/model.pkl
          test_X_file_path: data/test_X.csv
          test_y_file_path: data/test_y.csv
  set_experiment_name:
    cmd: python src/set_experiment_name.py
    deps:
    - path: src/set_experiment_name.py
      hash: md5
      md5: e611c2e2480477d88bdbacfcb845cca5
      size: 669
      isexec: true
    outs:
    - path: mlflow_experiment_name.yaml
      hash: md5
      md5: e6254183f2033ce198d8b29b2f5e00f6
      size: 43
      isexec: true
